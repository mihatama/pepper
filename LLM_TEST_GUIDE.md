# LLM機能テストガイド

## 🤖 現在の状況

現在、ビルドスクリプトが正常に実行されていないため、環境変数が読み取れていません。
しかし、**手動でAPIキーを設定してLLM機能をテスト**することができます。

## 🔧 手動テスト方法

### 1. Gemini APIキーの取得

1. [Google AI Studio](https://makersuite.google.com/) にアクセス
2. Googleアカウントでログイン
3. 「Get API Key」をクリック
4. 新しいAPIキーを作成
5. APIキーをコピー（例: `AIzaSyC...`）

### 2. 手動でAPIキーを設定

1. https://peppercraftai.netlify.app/ にアクセス
2. ブラウザの開発者ツールを開く（F12キー）
3. **Console**タブを選択
4. 以下のコマンドを入力してEnterキーを押す：

```javascript
setGeminiAPIKey("あなたのAPIキーをここに貼り付け")
```

例：
```javascript
setGeminiAPIKey("AIzaSyC1234567890abcdefghijklmnopqrstuvwxyz")
```

### 3. LLM機能のテスト

APIキーを設定後、以下の機能をテストできます：

#### 味分析機能のテスト
1. **AI Taste**タブをクリック
2. テキストエリアに味の説明を入力：
   - 例: "辛くて香りが良い、肉料理に合う複雑な味"
   - 例: "さっぱりとした酸味のある、魚料理に合う味"
3. **味を分析**ボタンをクリック
4. **結果**: LLMが自然言語を理解して、5つの味要素のスコアを生成

#### 料理分析機能のテスト
1. **Dish Recipe**タブをクリック
2. 料理名を入力：
   - 例: "パッドタイ"
   - 例: "ビーフストロガノフ"
   - 例: "麻婆豆腐"
3. **レシピ作成**ボタンをクリック
4. **結果**: LLMが料理の味プロファイルを分析して、ペッパーブレンドを提案

## 🔍 成功の確認方法

### コンソールログの確認
APIキー設定後、以下のログが表示されるはずです：

```
🔑 API key manually set. LLM functionality should now be active.
✅ Gemini API key configured successfully
🤖 LLM-powered taste analysis is now active!
```

### 機能の違い

#### モックデータ使用時（現在）
- **味分析**: キーワードベースの簡単な分析
- **料理分析**: 事前定義された料理のみ対応
- **結果**: 固定的で限定的

#### LLM使用時（APIキー設定後）
- **味分析**: 自然言語の文脈を理解した詳細分析
- **料理分析**: あらゆる料理名に対応、リアルタイム分析
- **結果**: 動的で詳細、より精密

## 🚨 トラブルシューティング

### APIキーエラーの場合
```
Error: HTTP error! status: 400
```
- APIキーが正しいか確認
- Google AI Studioでクォータを確認

### ネットワークエラーの場合
```
Error: Failed to fetch
```
- インターネット接続を確認
- ブラウザのセキュリティ設定を確認

## 📊 テスト例

### 味分析のテスト例

**入力**: "I want something spicy and aromatic for grilled chicken"
**期待される結果**:
- Spiciness: 80-90
- Aroma: 85-95
- Citrusy: 30-50
- Freshness: 40-60
- Depth: 70-80

**入力**: "さっぱりとした酸味で、魚料理に合う味"
**期待される結果**:
- Spiciness: 10-30
- Aroma: 50-70
- Citrusy: 80-90
- Freshness: 85-95
- Depth: 40-60

### 料理分析のテスト例

**入力**: "Tom Yum Soup"
**期待される結果**:
- 高い辛味とフレッシュ感
- 酸味も高め
- タイ料理の特徴を反映

**入力**: "クリームパスタ"
**期待される結果**:
- 低い辛味
- 高い深み
- イタリア料理の特徴を反映

## 💡 ヒント

1. **APIキーの保護**: テスト後はAPIキーを削除または制限
2. **クォータ管理**: 無料枠を超えないよう注意
3. **結果の比較**: モックデータとLLM結果を比較して違いを確認

## 📝 まとめ

手動でAPIキーを設定することで、LLM機能の動作を確認できます。
ビルドスクリプトの問題は別途解決する必要がありますが、
機能自体は正常に動作するはずです。

テスト後は、より自然で精密な味分析とペッパーブレンドの提案が体験できます。
